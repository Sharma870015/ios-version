"use strict";(self.webpackChunkmy_todo_app=self.webpackChunkmy_todo_app||[]).push([[479],{479:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(43),n=s(213),i=s(910),o=s(929),l=s(579);const r=e=>{let{isOpen:t,onClose:s,onSave:n,onCancel:i}=e;const[o,r]=(0,a.useState)(""),[c,d]=(0,a.useState)("");if((0,a.useEffect)((()=>{if(t){const e=new Date,t=e.toISOString().split("T")[0],s=e.toTimeString().split(" ")[0].slice(0,5);r(t),d(s)}}),[t]),!t)return null;return(0,l.jsx)("div",{className:"modal-overlay",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsx)("h2",{className:"set-align",children:"Set Reminder"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"for-label",htmlFor:"reminder-date",children:"Date:"}),(0,l.jsx)("input",{type:"date",id:"reminder-date",value:o,onChange:e=>r(e.target.value)})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"for-label",htmlFor:"reminder-time",children:"Time:"}),(0,l.jsx)("input",{type:"time",id:"reminder-time",value:c,onChange:e=>d(e.target.value)})]}),(0,l.jsxs)("div",{className:"button-group",children:[(0,l.jsx)("button",{className:"for-Save",onClick:()=>{o&&c?n(o,c):alert("Please set both date and time")},children:"Save"}),(0,l.jsx)("button",{className:"for-cancel",onClick:()=>{i()},children:"Cancel"}),(0,l.jsx)("button",{className:"for-cancel",onClick:s,children:"Close"})]})]})})},c=e=>{let{title:t,description:s,onClose:a}=e;return(0,l.jsx)("div",{className:"reminder-alert-overlay",children:(0,l.jsxs)("div",{className:"reminder-alert-content",children:[(0,l.jsx)("h2",{className:"reminder-alert-title",children:"Reminder"}),(0,l.jsx)("p",{className:"reminder-alert-message",children:t}),(0,l.jsx)("p",{className:"reminder-alert-description",children:s}),(0,l.jsx)("button",{className:"reminder-alert-button",onClick:a,children:"Close"})]})})};var d=s(129),m=s(216);const u=e=>{let{isOpen:t,onClose:s,onConfirm:a}=e;return t?(0,l.jsx)("div",{className:"delete-confirmation-overlay",children:(0,l.jsxs)("div",{className:"delete-confirmation-modal",children:[(0,l.jsx)("h3",{className:"delete-confirmation-title",children:"Delete Task"}),(0,l.jsx)("p",{className:"delete-confirmation-message",children:"Are you sure you want to delete this task?"}),(0,l.jsxs)("div",{className:"delete-confirmation-actions",children:[(0,l.jsx)("button",{className:"delete-confirmation-button cancel",onClick:s,children:"No"}),(0,l.jsx)("button",{className:"delete-confirmation-button confirm",onClick:a,children:"Yes"})]})]})}):null},h=e=>{let{isOpen:t,onClose:s,message:a}=e;return t?(0,l.jsx)("div",{className:"success-modal-overlay",children:(0,l.jsxs)("div",{className:"success-modal",children:[(0,l.jsx)("p",{children:a}),(0,l.jsx)("button",{onClick:s,className:"close-button",children:"Close"})]})}):null},p=()=>{var e,t;const{todos:s,setTodos:p,isFetched:x}=(0,a.useContext)(d.B),[j,N]=(0,a.useState)(""),[v,g]=(0,a.useState)(""),[f,C]=(0,a.useState)(null),[S,y]=(0,a.useState)(""),[b,k]=(0,a.useState)(""),[D,w]=(0,a.useState)(!1),[T,E]=(0,a.useState)(null),[A,F]=(0,a.useState)(""),[O,I]=(0,a.useState)(""),[U,L]=(0,a.useState)(!1),[P,_]=(0,a.useState)(""),[W,q]=(0,a.useState)(!1),[J,R]=(0,a.useState)(null),[z,B]=(0,a.useState)(!1),H=(null===(e=(0,m.zy)().state)||void 0===e?void 0:e.username)||localStorage.getItem("username")||"";(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("todos"))||[];p(e),"default"===Notification.permission&&Notification.requestPermission()}),[]),(0,a.useEffect)((()=>{localStorage.setItem("todos",JSON.stringify(s))}),[s]),(0,a.useEffect)((()=>{const e=setInterval((()=>{K()}),1e3);return()=>clearInterval(e)}),[s]);const M=(e,t)=>{t(e.target.value),_("")},Y=()=>{_("")},G=async()=>{try{const e=await n.A.put("https://jsonplaceholder.typicode.com/todos/".concat(f.id),{...f,title:S,description:b}),t=s.map((t=>t.id===f.id?e.data:t));p(V(t)),C(null),y(""),k(""),B(!0)}catch(P){console.error("Error updating todo:",P)}},K=()=>{const e=new Date;s.forEach((t=>{if(t.reminderDate&&t.reminderTime){const a=new Date("".concat(t.reminderDate,"T").concat(t.reminderTime,":00"));if(e>=a){F(t.title),I(t.description),L(!0);const e=s.map((e=>e.id===t.id?{...e,reminderDate:null,reminderTime:null}:e));p(V(e)),Q(t.title,t.description)}}}))},Q=(e,t)=>{"serviceWorker"in navigator?navigator.serviceWorker.ready.then((s=>{s.showNotification(e,{body:t,icon:"/path/to/icon.png",badge:"/path/to/badge.png"})})):"granted"===Notification.permission?new Notification(e,{body:t}):"default"===Notification.permission&&Notification.requestPermission().then((s=>{"granted"===s&&new Notification(e,{body:t})}))},V=e=>e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));return x?(0,l.jsxs)("div",{className:"todo-list-container",children:[(0,l.jsxs)("div",{className:"greeting-content",children:[(0,l.jsx)("div",{className:"avatar",children:(null===(t=H[0])||void 0===t?void 0:t.toUpperCase())||""}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"greeting",children:["Welcome, ",H||"User","!"]}),(0,l.jsx)("p",{className:"welcome-message",children:"Have a productive day!"})]})]}),(0,l.jsxs)("div",{className:"todo-list-box",children:[0===s.length&&(0,l.jsx)("p",{className:"no-todos-message",children:"Add some todos to make your project easier!"}),(0,l.jsxs)("div",{className:"todo-header",children:[(0,l.jsx)("input",{className:"todo-input",type:"text",value:j,onChange:e=>M(e,N),onFocus:Y,placeholder:"Enter task title"}),(0,l.jsx)("input",{className:"todo-input",type:"text",value:v,onChange:e=>M(e,g),onFocus:Y,placeholder:"Enter task description"}),P&&(0,l.jsx)("div",{className:"error-message",children:P}),(0,l.jsx)("button",{className:"todo-button",onClick:()=>{if(!j.trim()&&!v.trim())return void _("Please enter a title or description.");const e=(new Date).toLocaleString(),t={userId:1,id:s.length+1,title:j,description:v,createdAt:e,completed:!1},a=[t,...s];p(a),N(""),g(""),E(t),w(!0),_("")},children:"Add"})]}),(0,l.jsx)("ul",{className:"todo-list",children:V(s).map((e=>(0,l.jsx)("li",{className:"todo-item",children:f&&f.id===e.id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{className:"for-updatelist",placeholder:"Edit Title",type:"text",value:S,onChange:e=>y(e.target.value),onFocus:Y}),(0,l.jsx)("input",{className:"for-updatedescr",placeholder:"Edit Description",type:"text",value:b,onChange:e=>k(e.target.value),onFocus:Y}),(0,l.jsx)("button",{className:"Update-btn",onClick:G,children:"Update"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"todo-info",children:[e.reminderDate&&e.reminderTime&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"todo-day",children:new Date(e.reminderDate).toLocaleDateString("en-US",{weekday:"short"})}),(0,l.jsx)("span",{className:"todo-date",children:new Date(e.reminderDate).toLocaleDateString("en-US",{day:"numeric",month:"short"})})]}),(0,l.jsxs)("div",{className:"todo-text",children:[(0,l.jsx)("span",{className:"todo-title",children:e.title}),(0,l.jsx)("span",{className:"todo-description",children:e.description})]})]}),(0,l.jsxs)("div",{className:"date-time",children:["Added on: ",e.createdAt]}),(0,l.jsxs)("div",{className:"todo-actions",children:[(0,l.jsx)(i.g,{icon:o.MT7,onClick:()=>(e=>{C(e),y(e.title),k(e.description)})(e),className:"icon"}),(0,l.jsx)(i.g,{icon:o.yLS,onClick:()=>(e=>{q(!0),R(e)})(e),className:"icon"})]})]})},e.id)))})]}),D&&(0,l.jsx)(r,{isOpen:D,onClose:()=>w(!1),onSave:(e,t)=>{const a={...T,reminderDate:e,reminderTime:t},n=s.map((e=>e.id===T.id?a:e));p(n),w(!1)}}),U&&(0,l.jsx)(c,{title:A,description:O,onClose:()=>L(!1)}),W&&(0,l.jsx)(u,{isOpen:W,onClose:()=>q(!1),onConfirm:()=>(async e=>{try{await n.A.delete("https://jsonplaceholder.typicode.com/todos/".concat(e));const t=s.filter((t=>t.id!==e));p(t)}catch(P){console.error("Error deleting todo:",P)}q(!1),R(null)})(J.id)}),z&&(0,l.jsx)(h,{isOpen:z,onClose:()=>B(!1),message:"Todo updated successfully!"})]}):null}}}]);
//# sourceMappingURL=479.5bf5f310.chunk.js.map